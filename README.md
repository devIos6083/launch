# ⏱️ Launch

## 📌 목차  
- [프로젝트 요약](#📌-프로젝트-요약)  
- [진행 상황](#📅-진행-상황)  
- [구현 결과](#🖥-구현-결과)  
- [트러블 슈팅](#🛠-트러블-슈팅)  
- [학습한 내용](#📚-학습한-내용)  
- [느낀 점](#💬-느낀-점)  

---

## 📌 프로젝트 요약  

| 항목              | 상세 내용 |
|-----------------|--------------------------------------------------------------|
| **기여도**       | **100% (1인 개발)** |
| **프로젝트 목적** | 할 일 타이머 앱 개발을 통한 생산성 도구 구현 |
| **구현 기간**    | **2024.04.15 ~ 진행중 ** |
| **기술 스택**    | **Flutter / Dart / Firebase / tts** |
| **핵심 기능**    | ✅ 할 일 입력 기능  <br> ✅ 10초 카운트다운 타이머  <br> ✅ 타이머 완료 알림  <br> ✅ 히스토리 저장 및 조회  |

---

## 📅 진행 상황  

| 날짜          | 작업 내용 |
|--------------|-------------------------------------------|
| **2024.04.15** | 📌 **프로젝트 기획 및 초기 설정**  <br> - 앱 콘셉트 및 디자인 구상  <br> - Firebase 프로젝트 연동  <br> - 기본 UI 레이아웃 설계 |
| **2024.04.16** | 📌 **핵심 기능 구현**   <br> - 할 일 입력 폼 구현  <br> - 타이머 기능 구현 (카운트다운 로직)  <br> - 애니메이션 효과 추가 |
| **2024.04.17** | 📌 **데이터 관리 구현**   <br> - Firebase Realtime Database 연동  <br> - 사용자별 할 일 히스토리 저장  <br> - 데이터 동기화 기능 구현 |
| **2024.04.18** | 📌 **UI 개선 및 마무리**   <br> - 알림 기능 구현 (타이머 완료 시)  <br> - UI/UX 디테일 개선  <br> - 성능 최적화 및 버그 수정  |
| **2024.04.29** | 📌 **UI 개선 및 코드 리팩토링**   <br> - 카카오 로그인 구현  <br> - 데이터 구조 개선  |
| **2024.05.11** | 📌 **타이머 UX 개선 및 버그 수정**   <br> - 타이머 색상 및 디자인 개선 <br> - 카운트다운 음성 기능 수정 <br> - 타이머 완료 후 버튼 동작 개선 |
| **2024.05.18** | 📌 **통계 업데이트 버그 수정**   <br> - 중복 통계 업데이트 문제 해결 <br> - 요일별 진행 상황 업데이트 수정 <br> - 카운트다운 완료 후 화면 전환 논리 개선 <br> - 불필요한 수동 새로고침 버튼 제거 |

---

## 📌 구현 결과

### 앱 주요 화면

<table>
<tr>
  <td align="center" width="33%"><strong>스플래시 & 회원가입 화면</strong><br><img src="https://github.com/user-attachments/assets/ea7a579b-95a6-4349-8278-df5915c0c0ad" width="100%"></td>
  <td align="center" width="33%"><strong>비밀번호 재설정 화면</strong><br><img src="https://github.com/user-attachments/assets/8fd071d6-9d2b-4eae-9860-0171bcc6db4c" width="100%"></td>
  <td align="center" width="33%"><strong>홈 화면 & 활동 추가</strong><br><img src="https://github.com/user-attachments/assets/f14032b8-df5b-460f-a500-e69b2930e51a" width="100%"></td>
</tr>
<tr>
  <td align="center" width="33%"><strong>카운트다운 & 타이머 화면</strong><br><img src="https://github.com/user-attachments/assets/89f9156b-ad2a-499b-8b30-c0efa9362680" width="100%"></td>
  <td align="center" width="33%"><strong>작업 완료 & 결과 분석</strong><br><img src="https://github.com/user-attachments/assets/d08aa950-6309-4661-8385-59ef144e28c5" width="100%"></td>
  <td align="center" width="33%"></td>
</tr>
</table>

---

## 📌 트러블 슈팅

### 🔹 문제 1: Firebase 권한 오류
- **원인:** Firebase Realtime Database 보안 규칙 설정 문제로 인해 `[firebase_database/permission-denied]` 오류 발생
- **해결:** 데이터베이스 규칙을 수정하여 인증된 사용자가 자신의 데이터에만 접근할 수 있도록 변경. 특히 데이터가 없는 경우(새 활동 생성 시)에 대한 예외 처리 추가

### 🔹 문제 2: 타이머 상태 업데이트 오류
- **원인:** UI 렌더링 중 상태 업데이트를 시도하여 `setState() or markNeedsBuild() called during build` 오류 발생
- **해결:** 상태 업데이트 로직을 개선하여 빌드 중인 경우 프레임 이후에 상태를 업데이트하도록 변경

### 🔹 문제 3: 카운트다운 음성 안내 중복 재생
- **원인:** 타이머 업데이트마다 TTS가 호출되어 같은 숫자가 여러 번 발음되는 문제
- **해결:** 마지막으로 발화한 숫자를 기록하고, 새로운 숫자일 때만 TTS 실행하도록 수정

### 🔹 문제 4: 앱 재설치 이후 작동 문제
- **원인:** 로컬 데이터나 캐시, 인증 토큰 문제로 인해 앱 재시작만으로는 해결되지 않는 문제 발생
- **해결:** 앱 삭제 후 재설치를 통해 모든 로컬 데이터와 캐시를 초기화하여 해결. 이후 코드에서 인증 및 데이터 초기화 로직을 개선

### 🔹 문제 5: 통계 데이터 중복 업데이트 문제
- **원인:** CountdownScreen과 FocusTimerScreen 두 곳에서 모두 통계를 업데이트하여 활동 완료 수가 두 배로 증가하는 문제
- **해결:** FocusTimerScreen의 _completeTimer 메서드에서만 통계를 업데이트하도록 코드 수정

### 🔹 문제 6: 요일별 진행 상황 업데이트 누락
- **원인:** 활동 완료 시 총 활동 수는 증가하지만 weeklyProgress 맵의 요일별 데이터가 제대로 업데이트되지 않음
- **해결:** 통계 업데이트 시 현재 요일을 정확히 파악하여 weeklyProgress에 반영하도록 로직 개선

### 🔹 문제 7: 카운트다운 완료 전 화면 전환 버그
- **원인:** 카운트다운이 완료되지 않은 상태에서 포커스 타이머 화면으로 전환되는 현상
- **해결:** 카운트다운 완료 조건을 더 엄격하게 검사하고, 딜레이를 추가하여 확실히 종료된 후에만 화면이 전환되도록 수정

---

## 📌 학습한 내용

### ✅ 1. Firebase Realtime Database 데이터 구조 설계
- NoSQL 데이터베이스의 특성을 고려한 효율적인 데이터 구조 설계의 중요성 학습
- 중첩 구조를 사용한 데이터 관리보다 플랫 구조로 데이터를 설계하는 것이 효율적
- 사용자 ID를 기준으로 데이터를 분리하여 보안 및 접근 효율성 향상

### ✅ 2. Firebase 보안 규칙 설정
- 보안 규칙의 중요성과 올바른 설정 방법 학습
- 사용자 인증 기반의 데이터 접근 제어 구현
- 경로별 세분화된 권한 설정으로 데이터 보안 강화
- 데이터 생성, 읽기, 수정, 삭제 각 작업에 대한 적절한 권한 부여

### ✅ 3. Firebase 데이터 실시간 동기화
- Stream을 활용한 실시간 데이터 변경 감지 및 UI 업데이트 구현
- onValue, onChildAdded, onChildChanged 등의 이벤트 리스너 활용
- 데이터 변경 시 효율적인 UI 업데이트를 위한 상태 관리 패턴 적용

### ✅ 4. Firebase 트랜잭션 처리
- 동시성 문제 해결을 위한 트랜잭션 활용 방법 학습
- 카운터 증가 등의 원자적 연산 처리
- 트랜잭션을 통한 데이터 일관성 유지

### ✅ 5. Firebase 인증 관리
- Firebase Authentication을 활용한 사용자 인증 구현
- 익명 로그인 및 토큰 관리 방법 학습
- 인증 상태 변경 감지 및 적절한 UI 처리

### ✅ 6. Firebase 오프라인 지원
- 오프라인 상태에서의 데이터 처리 및 동기화 전략 학습
- 로컬 캐싱을 통한 오프라인 데이터 접근성 향상
- 네트워크 연결 복구 시 자동 동기화 구현

### ✅ 7. Flutter 상태 관리 최적화 (2024-05-18 추가)
- Provider 패턴에서 중복 상태 업데이트 방지 방법 학습
- 단방향 데이터 흐름을 유지하여 예측 가능한 상태 변화 구현
- 화면 간 데이터 전달 시 적절한 시점에 상태 업데이트하는 패턴 적용

### ✅ 8. UI/UX 개선 (2024-05-18 추가)
- 사용자 경험 향상을 위한 불필요한 UI 요소 제거 (수동 새로고침 버튼)
- 타이머 완료 시 일관된 동작과 시각적 피드백 제공
- 자동 데이터 동기화를 통한 앱 사용성 향상

---

## 📌 느낀 점

Firebase Realtime Database를 활용하면서 실시간 데이터 동기화의 강력함을 체험했습니다. 특히 Stream 기반의 데이터 감지 기능이 Flutter의 상태 관리와 자연스럽게 연동되어 효율적인 UI 업데이트가 가능했습니다. 

보안 규칙 설정에 많은 시행착오가 있었지만, 이 과정에서 데이터 접근 제어의 중요성과 NoSQL 데이터베이스의 구조 설계 방식에 대해 깊이 이해할 수 있었습니다. 처음에는 단순히 데이터를 저장하고 불러오는 것에만 집중했지만, 점차 트랜잭션 처리, 인증 관리, 오프라인 지원 등 더 고급 기능들을 활용하면서 완성도 높은 앱을 개발할 수 있었습니다.

또한 Flutter의 Provider 패턴과 Firebase의 실시간 데이터베이스를 결합하여 효율적인 상태 관리 아키텍처를 구축한 것이 가장 큰 성과라고 생각합니다. 이를 통해 앱의 복잡성이 증가하더라도 확장성과 유지보수성을 유지할 수 있게 되었습니다.

오늘(2024-05-18)은 특히 데이터 업데이트 로직에서 발생하는 복잡한 버그들을 해결하면서 상태 관리의 중요성을 다시 한번 체감했습니다. 같은 데이터를 여러 곳에서 동시에 업데이트하는 것의 위험성과, 단일 책임 원칙에 따라 데이터 변경 지점을 명확하게 정의하는 것이 얼마나 중요한지 배웠습니다. 이런 경험은 향후 더 복잡한 앱을 개발할 때 큰 도움이 될 것입니다.

---

## 📌 향후 계획

1. **데이터 분석 기능 추가**: 사용자의 활동 패턴을 분석하여 생산성 인사이트 제공
2. **UI 테마 기능**: 다크 모드 및 사용자 지정 테마 지원
3. **푸시 알림 기능 강화**: 사용자 활동 패턴에 맞춘 맞춤형 알림 시스템 개발
4. **웹 버전 개발**: 크로스 플랫폼 지원을 통한 접근성 향상
